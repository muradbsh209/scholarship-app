{% extends "base.html" %}

{% block content %}
<h2>ğŸ“‹ BÃ¼tÃ¼n TÉ™lÉ™bÉ™lÉ™r</h2>

<div class="stats">
    <div class="stat-card">
        <h3>{{ students|length }}</h3>
        <p>Ãœmumi TÉ™lÉ™bÉ™ SayÄ±</p>
    </div>
</div>

{% if students|length > 0 %}
<table>
    <thead>
        <tr>
            <th>Ä°xtisas ID</th>
            <th>Ad</th>
            <th>Soyad</th>
            <th>Ä°ngilis (bal / qiymÉ™t)</th>
            <th>ADIAK (bal / qiymÉ™t)</th>
            <th>Tarix (bal / qiymÉ™t)</th>
            <th>ICT (bal / qiymÉ™t)</th>
            <th>Orta Bal</th>
            <th>Status</th>
            <th>ÆmÉ™liyyat</th>
        </tr>
    </thead>
    <tbody>
        {% for student in students %}
        <tr>
            <td>{{ student.ixtisas_id }} - {{ ixtisas_plans[student.ixtisas_id].name }}</td>
            <td>{{ student.name }}</td>
            <td>{{ student.surname }}</td>
            <td>{{ "%.2f"|format(student.english_point) }} ({{ student.english_grade }})</td>
            <td>
                {% if student.adiak_point > 0 %}
                    {{ "%.2f"|format(student.adiak_point) }} ({{ student.adiak_grade }})
                {% else %}
                    -
                {% endif %}
            </td>
            <td>
                {% if student.history_point > 0 %}
                    {{ "%.2f"|format(student.history_point) }} ({{ student.history_grade }})
                {% else %}
                    -
                {% endif %}
            </td>
            <td>{{ "%.2f"|format(student.ict_point) }} ({{ student.ict_grade }})</td>
            <td><strong>{{ "%.2f"|format(student.average_score) }}</strong></td>
            <td>
                {% if student.cancelled %}
                    Resit (lÉ™ÄŸv olunub)
                {% else %}
                    Normal
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for('edit_student', student_id=student.id) }}" style="display: inline-block; margin-right: 5px;">
                    <button type="button" style="padding: 6px 12px; font-size: 14px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">RedaktÉ™ et</button>
                </a>
                <form method="POST" action="{{ url_for('remove_student', student_id=student.id) }}" style="display: inline;">
                    <button type="submit" class="btn-danger" onclick="return confirm('Bu tÉ™lÉ™bÉ™ni silmÉ™k istÉ™diyinizÉ™ É™minsiniz?')" style="padding: 6px 12px; font-size: 14px;">Sil</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a href="{{ url_for('calculate') }}">
    <button style="margin-top: 20px;">TÉ™qaÃ¼dlÉ™ri Hesabla</button>
</a>
{% else %}
<div class="alert alert-info">
    HÉ™lÉ™ heÃ§ bir tÉ™lÉ™bÉ™ É™lavÉ™ edilmÉ™yib. <a href="{{ url_for('index') }}">Buradan É™lavÉ™ edin</a>.
</div>
{% endif %}
{% endblock %}

